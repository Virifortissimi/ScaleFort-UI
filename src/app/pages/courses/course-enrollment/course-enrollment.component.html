<form *ngIf="!showPricePlans()" [formGroup]="formGroup">
    <div class="grid gap-4 grid-cols-1 sm:grid-cols-2">
        <div class="mb-2 col-span-2" *ngIf="departmentType() === 2">
            <label for="companyName" class="block text-sm font-medium text-gray-700 mb-1">Company Name *</label>
            <input type="text" name="companyName" formControlName="companyName"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent">
            <span
                *ngIf="formGroup.get('companyName')?.invalid && (formGroup.get('companyName')?.dirty || formGroup.get('companyName')?.touched)"
                class="text-sm text-red-600">
                Company name is required.
            </span>
        </div>

        <div class="mb-2">
            <label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">First Name *</label>
            <input type="text" name="firstName" formControlName="firstName"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent">
            <span
                *ngIf="formGroup.get('firstName')?.invalid && (formGroup.get('firstName')?.dirty || formGroup.get('firstName')?.touched)"
                class="text-sm text-red-600">
                First name is required.
            </span>
        </div>

        <div class="mb-2">
            <label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">Last Name *</label>
            <input type="text" name="lastName" formControlName="lastName"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent">
            <span
                *ngIf="formGroup.get('lastName')?.invalid && (formGroup.get('lastName')?.dirty || formGroup.get('lastName')?.touched)"
                class="text-sm text-red-600">
                Last name is required.
            </span>
        </div>

        <div class="mb-2 col-span-2">
            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
            <input type="email" name="email" formControlName="email"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent">
            <span
                *ngIf="formGroup.get('email')?.invalid && (formGroup.get('email')?.dirty || formGroup.get('email')?.touched)"
                class="text-sm text-red-600">
                <span *ngIf="formGroup.get('email')?.errors?.['required']">
                    Email is required.
                </span>
                <span *ngIf="formGroup.get('email')?.errors?.['email']">
                    Please enter a valid email address.
                </span>
            </span>
        </div>

        <div class="mb-2 col-span-2">
            <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
            <input type="tel" name="phoneNumber" formControlName="phoneNumber"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent">
            <span
                *ngIf="formGroup.get('phoneNumber')?.invalid && (formGroup.get('phoneNumber')?.dirty || formGroup.get('phoneNumber')?.touched)"
                class="text-sm text-red-600">
                <span *ngIf="formGroup.get('phoneNumber')?.errors?.['required']">
                    Phone number is required.
                </span>
                <span
                    *ngIf="formGroup.get('phoneNumber')?.errors?.['minlength'] || formGroup.get('phoneNumber')?.errors?.['maxlength'] || formGroup.get('phoneNumber')?.errors?.['pattern']">
                    Please enter a valid 11-digit phone number.
                </span>
            </span>
        </div>

        <div class="mb-2 col-span-2">
            <label for="referralId" class="block text-sm font-medium text-gray-700 mb-1">Referral ID (Optional)</label>
            <input type="text" name="referralId" formControlName="referralId"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent">
        </div>

        <div class="mb-2 col-span-2">
            <label for="message" class="block text-sm font-medium text-gray-700 mb-1">Message</label>
            <textarea name="message" formControlName="message" rows="3"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"></textarea>
        </div>
    </div>

    <div class="mt-4">
        <p-button label="Submit Application" [loading]="isLoading()"
            [styleClass]="'w-full !bg-gradient-to-r !from-purple-600 !to-blue-600 text-white !border-0 font-semibold !py-3 !rounded-lg !hover:from-purple-700 !hover:to-blue-700 transition-all'"
            [disabled]="!formGroup.valid" (click)="submitEnrollment()" />
    </div>
</form>

<app-price-plan 
    *ngIf="showPricePlans()" 
    [userEmail]="userEmail()" 
    [applicationId]="applicationId()"
    (closeDialog)="closeDialog()"
></app-price-plan>